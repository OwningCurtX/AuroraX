"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var child_process_1 = require("child_process");
var platform = process.platform;
exports.unixHWID = function () {
    return new Promise(function (resolve, reject) {
        var command = platform === 'darwin'
            ? 'ioreg -rd1 -c IOPlatformExpertDevice'
            : 'cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null';
        child_process_1.exec(command, function (err, stdout) {
            if (err)
                return reject(err);
            var parsed = parse(stdout);
            return resolve(parsed);
        });
    });
};
var parse = function (stdout) {
    switch (platform) {
        case 'darwin':
            return stdout
                .split('IOPlatformUUID')[1]
                .split('\n')[0]
                .replace(/\=|\s+|\"/gi, '')
                .toLowerCase();
        case 'linux':
            return stdout
                .toString()
                .replace(/\r+|\n+|\s+/gi, '')
                .toLowerCase();
        default:
            return '';
    }
};
//# sourceMappingURL=unix.js.map